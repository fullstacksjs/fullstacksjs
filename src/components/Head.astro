---
import { HeadHrefLangs } from 'astro-i18next/components';
import { t } from 'i18next';
import type { Organization, WithContext } from 'schema-dts';

import { config } from '../libs/config';
import Analytics from './Analytics.astro';

export interface Props {
  title: string;
}

const title = t(Astro.props.title);

const keywords = [
  'community',
  'telegram',
  'کانال برنامه نویسی',
  'کانال تلگرام',
  'فول‌استکس',
].join(',');
const description =
  'FullstacksJS is an open-source community focused on knowledge sharing, exploring, and enhancing developer experience.';
const ogImage = 'https://fullstacksjs.com/og.png';
const bgColor = '#212025';
const accentColor = '#F39F47';

const schema: WithContext<Organization> = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  legalName: 'FullstacksJS',
  url: 'https://fullstacksjs.com',
  logo: 'https://fullstacksjs.com/maskable_icon_x512.png',
  funder: {
    '@type': 'Person',
    email: 'frontendmonster@gmail.com',
    givenName: 'Alireza',
    familyName: 'Safaeirad',
  },
};

const { containerId, trackingId } = config.analytics;
const isAnalyticEnabled = Boolean(trackingId) && Boolean(containerId);
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={Astro.generator} />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Vazirmatn:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16" />
  <link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color={bgColor} />

  <meta name="theme-color" content={accentColor} />
  <meta name="msapplication-TileColor" content={bgColor} />

  <meta name="description" content={description} />
  <meta name="keywords" content={keywords} />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="English" />
  <meta name="revisit-after" content="7 days" />
  <meta name="author" content="ASafaeirad" />

  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={ogImage} />
  <meta property="og:image:alt" content="FullstacksJS Logo" />

  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={ogImage} />
  <meta name="twitter:card" content="summary_large_image" />

  <HeadHrefLangs />
  <title>{title}</title>

  <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  {
    isAnalyticEnabled && (
      <Analytics containerId={containerId!} trackingId={trackingId!} />
    )
  }
</head>
